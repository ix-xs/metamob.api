<div align=center>
<span style="font-size:30px;">@ix-xs/metamob.api</span><br>
<br>
</div>

<img align=right src="https://metamob.fr/img/otomai.png">
<h1><img src="https://metamob.fr/img/logo.png">Metamob</h1>
<a href="https://metamob.fr/connexion">Connectez-vous</a> ou <a href="https://metamob.fr/inscription">Inscrivez-vous</a> pour profiter des avantages du site :
    <ul>
        <li>Suivez votre avancement dans la qu√™te</li>
        <li>G√©rez finement vos monstres</li>
        <li>Visualisez votre profil</li>
        <li>Echangez avec d'autres joueurs</li>
        <li>Une question ? Regardez <a href="https://metamob.fr/aide">l'aide</a></li>
      </ul>
<br>
<br>
<h1>üåêAPI</h1>
Une cl√© API sert √† interroger les donn√©es de Metamob pour pouvoir les utiliser ailleurs: dans une feuille Google Sheets, sur une application web, dans un bot Discord...
<br><br>
Vous trouverez plus d'informations dans <a href="https://metamob.fr/aide/api">la page d'aide</a>.
<br><br>
<span style="background-color: DarkRed;">Utiliser une cl√© API requiert des connaissances en d√©veloppement. Si vous ne savez pas ce qu'est une API ni comment l'utiliser, ce n'est pas la peine de cr√©er une cl√©.<br>
Les cl√©s API sont automatiquement supprim√©es au bout de 90 jours sans utilisation.</span>
<br>
<br>
<h3> üóùÔ∏èR√©cup√©rer une cl√© </h3>
Pour cr√©er votre cl√©, rendez-vous dans <a href="https://metamob.fr/utilisateur/mon_profil">votre espace</a> et cliquez sur l'onglet "API".
Vous devrez saisir un nom. Gardez √† l'esprit que vous ne pouvez cr√©er qu'une seule cl√© API pour l'instant.<br>
<b>Votre cl√© sera imm√©diatement utilisable.</b>
<br>
<h2>‚ú®Installation</h2>

`npm install @ix-xs/metamob.api`
<br>
<h2>üëÄUtilisation</h2>
<h3>1. Cr√©ez un nouveau client en fournissant votre cl√© API Metamob :</h3>

```js
const MetamobAPI = require("@ix-xs/metamob.api");

const client = new MetamobAPI({ apiKey:"votre_cl√©_api" });
```

<img src="https://user-images.githubusercontent.com/114710533/234149976-268042b8-9300-4fda-92f8-fa781541abad.png">

<br>
<h3>2. Liste des appels possibles</h3>
<br>

M√©thode | options | Description |
| --- | --- | --- |
| `getUser()` | `username`:string; | R√©cup√®re les informations d'un utilisateur. Non sensible √† la casse. |
| `getUserMonsters()` | `username`:string;<br>{<br>`type?`:string;<br>`monstre?`:string;<br>`etape?`:string;<br>`quantite?`:string;<br>`etat?`:string;<br>} | R√©cup√®re les monstres d'un utilisateur. Le nom d'utilisateur n'est pas sensible √† la casse. |
| `getMonsters()` | {<br>`monstre?`:string;<br>`etape?`:string;<br>`type?`:string;<br>} | R√©cup√®re les monstres. |
| `getServers()` | `server?`:string; | R√©cup√®re les serveurs. |
| `getKralamoures()` | {<br>`serveur?`:string;<br>`date_debut?`:string;<br>`date_fin?`:string;<br>} | R√©cup√®re les kralamoures. |
| `getZones()` | `zone?`:string; | R√©cup√®re les zones. |
| `getSouszones()` | `souszone?`:string; | R√©cup√®re les sous-zones. |
| `putUserMonsters()` | `username`:string<br>`uniqueId`:string<br>`body`:Array<{<br>`monstre`:string;<br>`quantite?`:string;<br>`etat?`:string;<br>}> | Met √† jour les informations de monstre d'un compte utilisateur.<br>Le champ quantite indique l'op√©ration √† effectuer sur la quantit√©:<br>‚Ä¢ Si la quantit√© renseigner commence par "===", la quantit√© du monstre sera forc√©e √† cette valeur.<br>‚Ä¢ Si la quantit√© renseigner commence par "+", la quantit√© du monstre sera incr√©menter de cette valeur<br>‚Ä¢ Si la quantit√© renseigner commence par "-", la quantit√© du monstre sera d√©cr√©menter de cette valeur  |
| `resetUserMonsters()` | `username`:string;<br>`uniqueId`:string; | R√©initialise les monstres sur le compte. Cela signifie que toutes les informations relatives aux monstres seront supprim√©es !<br>Les monstres seront mis √† l'√©tat aucun (ni recherch√© ni propos√©), avec une quantit√© nulle (0). |

<br>
<h3>3. Exemples</h3>
<br>


```js
const MetamobAPI = require("@ix-xs/metamob.api");

const client = new MetamobAPI({ apiKey:"votre_cl√©_api" });

// Renvoie les informations de l'utilisateur
client.getUser("popop").then(console.log);

// Renvoie les monstres "propos√©s" dont l'utilisateur poss√®de en + de 1 exemplaire
client.getUserMonsters("popop", { etat:"propose", quantite:">1" }).then(console.log);
 // Renvoie les monstres de l'utilisateur √† l'√©tape 20
client.getUserMonsters("popop", { etape:"20" }).then(console.log);

// Renvoie la liste de tous les monstres
client.getMonsters().then(console.log);
// Renvoie la liste de tous les archimonstres
client.getMonsters({ type:"archimonstre" }).then(console.log);

// Renvoie la liste de tous les serveurs
client.getServers().then(console.log);
// Renvoie les informations sur le serveur "Tylezia"
client.getServers("Tylezia").then(console.log);

// Renvoie la liste des ouvertures pr√©vues entre la date du jour et 1 mois plus tard
client.getKralamoures().then(console.log);
 // Renvoie la liste des ouvertures pr√©vues entre la date du jour et le 01 juin 2024 sur le serveur Tylezia
client.getKralamoures({ serveur:"Tylezia", date_fin:"2023-06-01" }).then(console.log);

// Renvoie la liste de toutes les zones
client.getZones().then(console.log); 
// Renvoie les informations sur la zone Amakna
client.getZones("Amakna").then(console.log);

// Renvoie la liste de toutes les sous-zones.
client.getSouszones().then(console.log);
// Renvoie les informations sur la sous-zones Aerdala
client.getSouszones("Aerdala").then(console.log);

// La quantit√© du monstre Arakne sera incr√©menter de 5 et passera √† l'√©tat propos√©
// La quantit√© du monstre Larchimaide la Pouss√©e passera √† 3
// La quantit√© du monstre Bouftou Royal sera d√©cr√©menter de 2
client.putUserMonsters("nom_utilisateur", "id_unique_utilisateur", [
	{ monstre:"Arakne", quantite:"+5", etat:"propose" },
	{ monstre:"Larchimaide la Pouss√©e", quantite:"===3" },
	{ monstre:"Bouftou Royal", quantite:"-2" },
]).then(console.log);

// Tous les monstres de l'utilisateur seront r√©initialiser (quantite √† 0 et aucun √©tat)
client.resestUserMonsters("pseudo_utilisateur", "id_unique_utilisateur").then(console.log);
```
<br>
<br>
Contactez moi sur Discord si vous rencontrez des difficult√©s : ix_xs
